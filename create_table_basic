CREATE TABLE AUTHOR
(
    isbn INTEGER NOT NULL,
    name_id INTEGER NOT NULL,
    FOREIGN KEY (isbn) REFERENCES BOOK (isbn) DEFERRABLE INITIALLY DEFERRED,
    FOREIGN KEY (name_id) REFERENCES NAMES (id) DEFERRABLE INITIALLY DEFERRED
);
CREATE TABLE BOOK
(
    isbn INTEGER PRIMARY KEY NOT NULL,
    title TEXT NOT NULL,
    pid INTEGER NOT NULL,
    year INTEGER,
    price REAL,
    FOREIGN KEY (pid) REFERENCES PUBLISHERS (pid) DEFERRABLE INITIALLY DEFERRED
);
CREATE TABLE CUSTOMER
(
    entity_id INTEGER PRIMARY KEY NOT NULL,
    FOREIGN KEY (entity_id) REFERENCES ENTITY (id) ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED
);
CREATE TABLE ENTITY
(
    id INTEGER PRIMARY KEY NOT NULL,
    name_id INTEGER,
    phone INTEGER,
    email TEXT,
    po_box INTEGER,
    country TEXT,
    city TEXT,
    state TEXT,
    postalcode INTEGER,
    address TEXT,
    FOREIGN KEY (name_id) REFERENCES NAMES (id) ON DELETE CASCADE DEFERRABLE INITIALLY DEFERRED
);
CREATE TABLE NAMES
(
    id INTEGER PRIMARY KEY NOT NULL,
    fname TEXT,
    lname TEXT,
    mname TEXT
);
CREATE TABLE PUBLISHERS
(
    pid INTEGER PRIMARY KEY NOT NULL,
    publisher TEXT NOT NULL
);